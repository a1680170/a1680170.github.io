<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html class="hidden" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <link rel="apple-touch-icon" href="img/support-app-icon.png">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <!-- <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, minimal-ui" name="viewport"> -->
    <title>迪士尼III客服</title>
    <!--[if lt IE 9 ]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->
    <link rel="stylesheet" href="css/animate.css" />
    <style>
        html,body{
          margin: 0;
          padding: 0;
          background-color: #329FD9;
        }
        iframe{
          width: 100%;
          height: 100%;
          outline: none;
          border: 0;
          top: 0;
          right: 0;
          bottom: 0;
          left: 0;
          position: fixed;
        }

        .blur{
          filter: blur(20px);
        }
        .close{
          position: fixed;
          background-color: #329FD9;
          width: 100px;
          height: 30px;
          top: 0;
          right: 0;
          outline: none;
          border: 0;
          color: #fff;
          cursor: pointer;
          animation-delay: 1s;
          text-align: right;
          z-index: 999;
        }
        .close:hover{
          color: yellow;
        }
        .close.no-font{
          font-size: 0;
        }
        .footer{
          position: fixed;
          width: 200px;
          height: 30px;
          background-color: #329FD9;
          bottom: 0;
          right: 0;
          animation-delay: 1s;
          z-index: 999;
        }

        .instruction{
          display: none;
          position: fixed;
          bottom: 50px;
          left: 0;
          right: 0;
          width: 80%;
          height: 50px;
          margin: auto;
        }

        .instruction.hidden{
          display: none !important;
        }

        .instruction img{
          width: 100%;
          height: auto;
        }

        .instruction .close-instruction{
          position: absolute;
          right: 0;
          top: 0;
          opacity: 0;
          height: 100%;
        }

        @media all and (display-mode: standalone) {
          .instruction{
            display: none !important;
          }
        }

        .overlay{
          display: none;
          position: fixed;
          top: 0;
          right: 0;
          bottom: 0;
          left: 0;
          background-color: rgba(55,55,55,0.5);
          z-index: 99;
        }

        .image-container{
          display: none;
          background: url(img/temp.png) top no-repeat;
          width: 80%;
          height: 500px;
          margin: 40px auto;
          background-size: contain;
          position: fixed;
          top: 0;
          right: 0;
          margin: 0;
          z-index: 999;
        }

        .user-agent{
            position: fixed;
            bottom: 100px;
            width: 100%;
            height: 100px;
            left: 0;
        }
    </style>
</head>

<body>
    <button class="close fadeInDown animated">关闭</button>
    <iframe src="https://chatserver.comm100.com/chatWindow.aspx?siteId=228510&planId=11"></iframe>
    <div class="footer fadeInUp animated"></div>

    <!-- Only show this if detected mobile -->
    <div class="instruction ios fadeInUp animated">
        <img src="img/popup-instruction.png" />
        <button class="close-instruction">Close</button>
    </div>

    <!-- Only show this if detected wechat or qq -->
    <div class="image-container"></div>
    <div class="overlay"></div>

</body>
<script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
<script>
    $(document).ready(function(){
      $('.close').click(function(){
        window.close();
       });

      if(getMobileOperatingSystem() === 'android' || getMobileOperatingSystem() === 'ios'){
        $('.footer').hide();
        $('.close').addClass('no-font');
        $('.instruction').fadeIn();
        if (!(("standalone" in window.navigator) && !window.navigator.standalone)){
          $('.instruction').addClass("hidden");
        }
      };

      if(isWeixinBrowser() || isQQBrowser()){
        $('.instruction').fadeOut();
        $('iframe').addClass('blur');
        $('.image-container').fadeIn();
        $('.overlay').fadeIn();
      };

      $('.close-instruction').click(function(){
        $('.instruction').fadeOut();
       });
    });

    function isWeixinBrowser(){
      return /micromessenger/.test(navigator.userAgent.toLowerCase())
    }

    function isQQBrowser(){
      return /qbwebviewtype/.test(navigator.userAgent.toLowerCase())
    }

   function getMobileOperatingSystem() {
      var userAgent = navigator.userAgent || navigator.vendor || window.opera;
      if (/android/i.test(userAgent)) {
          return "android";
      }

      // iOS detection from: http://stackoverflow.com/a/9039885/177710
      if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
          return "ios";
      }
      return "unknown";
    }
</script>
</html>